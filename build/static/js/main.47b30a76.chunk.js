(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{30:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),i=n.n(c),o=n(18),s=n.n(o),r=n(8),l=(n(30),n(22)),u=n(2),d=n(3),_=n(23),p=n(24);var b=function(e){var t=e.component,n=Object(p.a)(e,["component"]);return i.a.useEffect((function(){localStorage.getItem("token")||n.openSigninPopup()}),[localStorage.getItem("token")]),Object(a.jsx)(d.b,{children:localStorage.getItem("token")?Object(a.jsx)(t,Object(_.a)({},n)):Object(a.jsx)(d.a,{to:"/"})})},m=i.a.createContext();var j=function(e){var t=i.a.useContext(m);function n(){e.disableMobileMenu(),e.onSignInClick()}function c(){e.disableMobileMenu(),e.onLogout()}function o(){return Object(a.jsx)("li",{className:"navigation__menu-item",children:Object(a.jsx)("button",{className:"navigation__menu-item-button circle-border",onClick:n,children:"Sign In"})})}function s(){return Object(a.jsx)(r.b,{to:"/saved-news",activeClassName:"navigation__menu-item_active navigation__menu-item_active-black",style:{textDecoration:"none",display:"flex"},children:Object(a.jsxs)("li",{className:"navigation__menu-item",children:[Object(a.jsx)("button",{className:"navigation__menu-item-button navigation__menu-item-button_".concat(e.savedNewsClass),onClick:e.onSavedArticlesClick,children:"Saved articles"})," "]})})}function l(){if(e.isLoggedIn)return Object(a.jsxs)(r.b,{exact:!0,to:"/",style:{textDecoration:"none",display:"flex"},children:[Object(a.jsx)("li",{className:"navigation__menu-item navigation__menu-item_".concat(e.isMobileMenuOpen?"mobile":""),children:Object(a.jsxs)("button",{className:"navigation__menu-item-button navigation__menu-item-button_".concat(e.savedNewsClass," navigation__menu-item-button_user ").concat(e.isLoggedIn?"circle-border circle-border_logged-in circle-border_".concat(e.savedNewsClass):""),onClick:c,children:[t.name||"temp user"," ",Object(a.jsx)("span",{className:"navigation__menu-item_logout navigation__menu-item_logout_".concat(e.savedNewsClass)})]})})," "]})}return document.addEventListener("click",(function(t){t.target.classList.contains("navigation__menu_mobile-underlay")&&e.disableMobileMenu()})),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("ul",{className:"navigation__menu-list",children:[Object(a.jsx)(r.b,{exact:!0,to:"/",activeClassName:"navigation__menu-item_active navigation__menu-item_active-white",style:{textDecoration:"none",display:"flex"},children:Object(a.jsxs)("li",{className:"navigation__menu-item navigation__menu-item_home ",children:[" ",Object(a.jsx)("button",{className:"navigation__menu-item-button navigation__menu-item-button_".concat(e.savedNewsClass),onClick:e.onHomeClick,children:"Home"})," "]})}),e.isLoggedIn?s():o(),l()]}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:"navigation__menu_mobile_button navigation__menu_mobile_button_".concat(e.savedNewsClass," navigation__menu_mobile_button_").concat(e.isMobileMenuOpen||e.isPopupOpened?"opened":""),onClick:function(){e.isMobileMenuOpen||e.isPopupOpened?(e.closePopups(),e.disableMobileMenu()):e.onHamburgerClick()}}),e.isMobileMenuOpen&&Object(a.jsx)("div",{className:"navigation__menu_mobile-underlay",children:Object(a.jsxs)("ul",{className:"navigation__menu-list navigation__menu-list_mobile navigation__menu-list_mobile_".concat(e.savedNewsClass),children:[Object(a.jsxs)("li",{className:"navigation__menu-item navigation__menu-item_mobile navigation__menu-item_home navigation__menu-item_home_mobile",children:[" ",Object(a.jsxs)(r.b,{to:"/",activeClassName:"navigation__menu-item_active",style:{textDecoration:"none",display:"flex"},children:[Object(a.jsx)("button",{className:"navigation__menu-item-button navigation__menu-item-button_".concat(e.savedNewsClass,"\n                    navigation__menu-item-button_mobile"),onClick:e.onHomeClick,children:"Home"})," "]})]}),e.isLoggedIn?s():o(),l()]})})]})]})};var h=function(e){var t=i.a.useState(!1),n=Object(u.a)(t,2),c=n[0],o=n[1];return Object(a.jsx)("header",{className:"header \n      header_".concat(c||e.isPopupOpened?"mobile":""," \n      header_").concat(c||e.isPopupOpened?"mobile":"","_").concat(e.savedNewsClass," \n      header_").concat(e.savedNewsClass),children:Object(a.jsxs)("div",{className:"header__container",children:[Object(a.jsx)("p",{className:"header__logo",children:"NewsExplorer"}),Object(a.jsx)(j,{isPopupOpened:e.isPopupOpened,closePopups:e.closePopups,onHamburgerClick:function(){o(!0)},disableMobileMenu:function(){o(!1)},isMobileMenuOpen:c,onLogout:e.onLogout,onHomeClick:e.onHomeClick,onSavedArticlesClick:e.onSavedArticlesClick,onSignInClick:e.onSignInClick,isLoggedIn:e.isLoggedIn,savedNewsClass:e.savedNewsClass})]})})};var g=function(e){var t=i.a.useState(!1),n=Object(u.a)(t,2),c=n[0],o=n[1],s=i.a.useState(""),r=Object(u.a)(s,2),l=r[0],d=r[1],_=["January","February","March","April","May","June","July","August","September","October","November","December"];function p(){e.isLoggedIn?e.isLoggedIn&&e.isViewingSavedArticles&&o(!0):o(!0)}function b(){o(!1)}function m(){e.isSavedArticle()||e.onSaveArticle(e.article)}function j(){e.onDeleteSavedArticle(e.article)}return i.a.useEffect((function(){!function(){var t=e.article.publishedAt||e.article.date,n=new Date(t);d("".concat(_[n.getMonth()]," ").concat(n.getDate(),", ").concat(n.getFullYear()))}()}),[]),Object(a.jsx)("li",{className:"news-card__item",children:Object(a.jsxs)("div",{className:"news-card",children:[e.isViewingSavedArticles?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"news-card__keyword-container",children:Object(a.jsx)("p",{className:"news-card__keyword-text",children:e.article.keyword})}),Object(a.jsx)("div",{className:"news-card__flag news-card__flag_type_trash ".concat(c?"news-card__flag_active":""),children:"Remove from saved"}),Object(a.jsx)("button",{className:"news-card__button news-card__button_trash-button",onMouseOver:p,onMouseOut:b,onClick:j})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"news-card__flag news-card__flag_type_sign-in ".concat(c?"news-card__flag_active":""),children:"Sign in to save articles"}),Object(a.jsx)("button",{className:"news-card__button news-card__button_save-button news-card__button_save-button_".concat(e.isSavedArticle()?"saved":""),onMouseOver:p,onMouseOut:b,onClick:m})]}),Object(a.jsxs)("a",{className:"news-card__article-link",href:e.article.url||e.article.link,target:"_blank",children:[Object(a.jsx)("div",{className:"news-card__image",style:{backgroundImage:"url(".concat(e.article.urlToImage||e.article.image,")")}}),Object(a.jsxs)("div",{className:"news-card__text-container",children:[Object(a.jsx)("p",{className:"news-card__date news-card__text news-card__text_date",children:l}),Object(a.jsx)("p",{className:"news-card__title news-card__text news-card__text_title",children:e.article.title}),Object(a.jsx)("p",{className:"news-card__abstract news-card__text news-card__text_abstract",children:e.article.description||e.article.text}),Object(a.jsx)("p",{className:"news-card__source news-card__text news-card__text_source",children:e.article.source.name||e.article.source})]})]})]})})};var f=function(e){var t=i.a.useState([]),n=Object(u.a)(t,2),c=n[0],o=n[1],s=i.a.useState(!1),r=Object(u.a)(s,2),l=r[0],d=r[1],_=i.a.useState(1),p=Object(u.a)(_,2),b=p[0],m=p[1];return i.a.useEffect((function(){o(e.data.slice(0,3)),e.data.length>3&&d(!1)}),[e.data]),i.a.useEffect((function(){3*b>e.data.length?(o(e.data),d(!0)):o(e.data.slice(0,3*b))}),[b]),Object(a.jsx)("div",{className:"news-list section",children:Object(a.jsxs)("div",{className:"news-list__container",children:[Object(a.jsx)("h2",{className:"news-list__title",children:"Search results"}),Object(a.jsx)("ul",{className:"news-list__cards-list",children:c.map((function(t,n){return Object(a.jsx)(g,{onDeleteSavedArticle:function(t){e.onDeleteSavedArticle(t)},onSaveArticle:function(t){e.onSaveArticle(t)},isSavedArticle:function(){return!(!e.isLoggedIn||!e.savedArticles)&&e.savedArticles.find((function(e){if(t.title===e.title)return!0}))},isViewingSavedArticles:e.isViewingSavedArticles,isLoggedIn:e.isLoggedIn,article:t},n)}))}),Object(a.jsx)("button",{className:"news-list__show-more-button ".concat(l?"hidden":""),onClick:function(){m(b+1)},children:"Show more"})]})})};var v=function(e){var t=i.a.useContext(m),n=i.a.useState(""),c=Object(u.a)(n,2),o=c[0],s=c[1],r=i.a.useState([]),l=Object(u.a)(r,2),d=l[0],_=l[1],p=i.a.useState([]),b=Object(u.a)(p,2),j=b[0],g=b[1],v=i.a.useState([]),O=Object(u.a)(v,2),x=O[0],S=O[1],w=[],N=[],k=[];return i.a.useEffect((function(){e.data.forEach((function(e){w.push(e.keyword)})),_(w.sort())}),[e.data]),i.a.useEffect((function(){d.forEach((function(e){var t;k.some((function(n,a){if(Object.values(n).includes(e))return t=a,!0}))?k[t].count++:k.push({keyword:e,count:1})})),g(k)}),[d]),i.a.useEffect((function(){S(j.sort((function(e,t){return t.count-e.count})))}),[j]),i.a.useEffect((function(){x.length>0&&function(){if(x.length>3){for(var e=0;e<2;e++)N.push(x[e].keyword);s("".concat(N.join(", "),", and ").concat(x.length-2," others"))}else{for(var t=new Intl.ListFormat("en"),n=0;n<x.length;n++)N.push(x[n].keyword);s("".concat(t.format(N)))}}()}),[x]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"saved-news",children:[Object(a.jsx)(h,{isPopupOpened:e.isPopupOpened,closePopups:e.closePopups,onLogout:e.onLogout,savedNewsClass:"saved-news",isLoggedIn:e.isLoggedIn,onHomeClick:e.onHomeClick}),Object(a.jsxs)("div",{className:"saved-news__subheader-container",children:[Object(a.jsx)("p",{className:"saved-news__subheader saved-news__subheader_text_title",children:"Saved articles"}),Object(a.jsx)("p",{className:"saved-news__subheader saved-news__subheader_text_descriptor",children:"".concat(t.name,", you have ").concat(e.data.length," articles saved")}),Object(a.jsxs)("p",{className:"saved-news__subheader saved-news__subheader_text_keywords",children:["By keywords:"," ",Object(a.jsx)("span",{className:"saved-news__subheader saved-news__subheader_text_keywords_bold",children:o})]})]})]}),Object(a.jsx)(f,{isViewingSavedArticles:e.isViewingSavedArticles,onSaveArticle:function(t){e.onSaveArticle(t)},onDeleteSavedArticle:function(t){e.onDeleteSavedArticle(t)},data:e.data,isLoggedIn:e.isLoggedIn})]})};var O=function(e){return Object(a.jsxs)("div",{className:"preloader section",children:[Object(a.jsx)("i",{className:"preloader__circle"}),Object(a.jsx)("p",{className:"preloader__text",children:"Searching for news..."})]})};var x=function(e){return Object(a.jsxs)("section",{className:"nothing-found section",children:[Object(a.jsx)("div",{className:"nothing-found__image"}),Object(a.jsx)("h2",{className:"nothing-found__title",children:e.title}),Object(a.jsx)("p",{className:"nothing-found__text",children:e.text})]})};var S=function(e){return Object(a.jsx)("div",{className:"about section",children:Object(a.jsxs)("div",{className:"about__container",children:[Object(a.jsx)("div",{className:"about__image"}),Object(a.jsxs)("div",{className:"about__text-container",children:[Object(a.jsx)("p",{className:"about__text about__text_subtitle",children:"About the author"}),Object(a.jsxs)("p",{className:"about__text about__text_description",children:["This block describes the project author. Here you should indicate your name, what you do, and which development technologies you know.",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"You can also talk about your experience with Practicum, what you learned there, and how you can help potential customers."]})]})]})})};var w=function(e){var t=i.a.useState(""),n=Object(u.a)(t,2),c=n[0],o=n[1],s=i.a.useState(!1),r=Object(u.a)(s,2),l=r[0],d=r[1],_=i.a.createRef();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"main",children:[Object(a.jsx)(h,{isPopupOpened:e.isPopupOpened,closePopups:e.closePopups,onLogout:e.onLogout,onSignInClick:e.onSignInClick,isLoggedIn:e.isLoggedIn,onSavedArticlesClick:e.onSavedArticlesClick}),Object(a.jsxs)("div",{className:"main__title-container",children:[Object(a.jsx)("h1",{className:"main__title",children:"What's going on in the world?"}),Object(a.jsx)("p",{className:"main__subtitle",children:"Find the latest news on any topic and save them in your personal account."})]}),Object(a.jsxs)("div",{className:"main__search-container",children:[Object(a.jsxs)("form",{action:"",className:"main__search-form",onSubmit:function(t){t.preventDefault(),0===_.current.value.length?o("Please enter keyword"):(o(""),e.onSearch())},children:[Object(a.jsx)("input",{ref:_,onChange:function(t){_.current.value.length<=0?d(!1):_.current.value.length>0&&d(!0),e.onInputQueryChange(t)},type:"text",className:"main__search-input",placeholder:"Enter topic"}),Object(a.jsx)("button",{className:"main__search-button ".concat(!e.isSearching||l?"":"main__search-button_disabled"),disabled:!l||e.isSearching,children:"Search"})]}),Object(a.jsx)("span",{children:c})]})]}),e.isSearching&&Object(a.jsx)(O,{}),e.noArticlesFound&&Object(a.jsx)(x,{title:"Nothing found",text:"Sorry, but nothing matched your search terms."}),e.searchError&&Object(a.jsx)(x,{title:"Search error",text:"Sorry, something went wrong during the request. There may be a connection issue or the server may be down. Please try again later."}),e.data.length>0&&Object(a.jsx)(f,{data:e.data,isLoggedIn:e.isLoggedIn,savedArticles:e.savedArticles,onSaveArticle:function(t){e.onSaveArticle(t)},onDeleteSavedArticle:function(t){e.onDeleteSavedArticle(t)}}),Object(a.jsx)(S,{})]})};var N=function(e){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsxs)("div",{className:"footer__container",children:[Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Alvin Wong"}),Object(a.jsx)("nav",{className:"footer__nav-menu",children:Object(a.jsxs)("ul",{className:"footer__nav-menu-list",children:[Object(a.jsx)("li",{className:"footer__nav-menu-item",children:Object(a.jsxs)("div",{className:"footer__nav-menu-container footer__nav-menu-container_type_links",children:[Object(a.jsxs)(r.b,{to:"/",children:[Object(a.jsx)("button",{className:"footer__nav-menu-button footer__nav-menu-button_home",onClick:e.onHomeClick,children:"Home"})," "]})," ",Object(a.jsx)("a",{href:"https://practicum.yandex.com/",target:"_blank",className:"footer__nav-menu-button footer__nav-menu-button_practicum",children:"Practicum"})]})}),Object(a.jsx)("li",{className:"footer__nav-menu-item",children:Object(a.jsxs)("div",{className:"footer__nav-menu-container footer__nav-menu-container_type_icons",children:[Object(a.jsx)("a",{href:"https://github.com/",target:"_blank",className:"footer__nav-menu-button footer__nav-menu-button_github",children:Object(a.jsx)("span",{className:"footer__nav-menu-icon footer__nav-menu-icon_github"})}),Object(a.jsx)("a",{href:"https://facebook.com/",target:"_blank",className:"footer__nav-menu-button footer__nav-menu-button_facebook",children:Object(a.jsx)("span",{className:"footer__nav-menu-icon footer__nav-menu-icon_facebook"})})]})})]})})]})})};var k=function(e){function t(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close-button"))&&e.onClose()}return Object(a.jsx)("div",{className:"popup ".concat(e.className," ").concat(e.isOpened?"popup_opened":""),onClick:t,children:Object(a.jsxs)("div",{className:"popup__dialog-window",children:[Object(a.jsx)("button",{className:"popup__close-button button",onClick:t}),Object(a.jsxs)("form",{className:"popup__form",noValidate:!0,autoComplete:"off",onSubmit:function(t){t.preventDefault(),e.onSubmit()},children:[Object(a.jsx)("h2",{className:"popup__title",children:e.popupTitle}),e.children]})]})})};var y=function(e){var t=i.a.useState(!1),n=Object(u.a)(t,2),c=n[0],o=n[1],s=i.a.useState(""),r=Object(u.a)(s,2),l=r[0],d=r[1];return i.a.useEffect((function(){e.checkInputValidity(c)}),[c,l]),Object(a.jsxs)("div",{className:"popup__input-container",children:[Object(a.jsx)("label",{className:"popup__input-title",children:e.inputType}),Object(a.jsx)("input",{className:"popup__input",autoComplete:"false",type:e.type,name:e.inputType,placeholder:e.placeholder,minLength:e.minLength,required:!0,onChange:function(t){e.onChange(t),t.target.validity.valid?(o(!0),d("")):(o(!1),d(t.target.validationMessage))}}),Object(a.jsx)("span",{className:"popup__input-error ".concat(c?"":"popup__input-error_visible"),id:e.spanId,children:l})]})};var C=function(e){var t=i.a.useState(!1),n=Object(u.a)(t,2),c=n[0],o=n[1],s=i.a.useState(!1),r=Object(u.a)(s,2),l=r[0],d=r[1],_=i.a.useState(""),p=Object(u.a)(_,2),b=p[0],m=p[1],j=i.a.useState(""),h=Object(u.a)(j,2),g=h[0],f=h[1];return Object(a.jsxs)(k,{className:"popup_sign-in",onSubmit:function(){e.onSubmit(b,g)},isOpened:e.isOpened,onClose:function(t){e.closePopup()},popupTitle:"Sign In",buttonText:"Sign In",flairText:"Sign Up",flairTextClick:e.flairTextClick,isFormValid:c&&l,children:[Object(a.jsx)(y,{inputType:"email",type:"email",placeholder:"Enter email",checkInputValidity:function(e){o(e)},onChange:function(e){m(e.target.value)}}),Object(a.jsx)(y,{minLength:"8",inputType:"password",type:"password",placeholder:"Enter password",checkInputValidity:function(e){d(e)},onChange:function(e){f(e.target.value)}}),Object(a.jsx)("button",{className:"popup__submit popup__submit_type_signin ".concat(c&&l?"":"popup__submit_disabled"),disabled:!c||!l,children:"Sign In"}),Object(a.jsxs)("p",{className:"popup__flair-text",children:["or"," ",Object(a.jsx)("span",{className:"popup__flair-text popup__flair-text_button",onClick:e.flairTextClick,children:"Sign Up"})]})]})};var I=function(e){var t=i.a.useState(!1),n=Object(u.a)(t,2),c=n[0],o=n[1],s=i.a.useState(!1),r=Object(u.a)(s,2),l=r[0],d=r[1],_=i.a.useState(!1),p=Object(u.a)(_,2),b=p[0],m=p[1],j=i.a.useState(""),h=Object(u.a)(j,2),g=h[0],f=h[1],v=i.a.useState(""),O=Object(u.a)(v,2),x=O[0],S=O[1],w=i.a.useState(""),N=Object(u.a)(w,2),C=N[0],I=N[1];return Object(a.jsxs)(k,{className:"popup_sign-up",onSubmit:function(){e.onSubmit(g,x,C)},isOpened:e.isOpened,onClose:function(t){e.closePopup()},popupTitle:"Sign Up",buttonText:"Sign Up",flairText:"Sign In",flairTextClick:e.flairTextClick,isFormValid:c&&l&&b,children:[Object(a.jsx)(y,{inputType:"email",type:"email",placeholder:"Enter email",checkInputValidity:function(e){o(e)},onChange:function(e){f(e.target.value)}}),Object(a.jsx)(y,{inputType:"password",type:"password",placeholder:"Enter password",minLength:"8",checkInputValidity:function(e){d(e)},onChange:function(e){S(e.target.value)}}),Object(a.jsx)(y,{inputType:"name",type:"text",placeholder:"Enter name",minLength:"2",checkInputValidity:function(e){m(e)},onChange:function(e){I(e.target.value)}}),Object(a.jsx)("button",{className:"popup__submit popup__submit_type_signup ".concat(c&&l&&b?"":"popup__submit_disabled"),disabled:!c||!l||!b,children:"Sign Up"}),Object(a.jsxs)("p",{className:"popup__flair-text",children:["or"," ",Object(a.jsx)("span",{className:"popup__flair-text popup__flair-text_button",onClick:e.flairTextClick,children:"Sign In"})]})]})};var A=function(e){return Object(a.jsx)(k,{popupTitle:"Registration successfully completed",isOpened:e.isOpened,onClose:e.closePopup,children:Object(a.jsx)("p",{className:"popup__flair-text  popup__flair-text_registration-success popup__flair-text_button",onClick:e.flairTextClick,children:"Sign In"})})};var T=function(e){return Object(a.jsx)(k,{className:"popup_delete",isOpened:e.isOpened,onClose:function(t){e.closePopup()},popupTitle:"Delete article",onSubmit:function(){e.onSubmit()},children:Object(a.jsx)("button",{className:"popup__submit popup__submit_type_delete",children:"Delete"})})},L="https://api.y-alvin.students.nomoreparties.site/",P=n(20),E=n(21),D=new(function(){function e(){Object(P.a)(this,e),this._searchFromDate=new Date(Date.now()-6048e5).toISOString(),this._currentDate=new Date(Date.now()).toISOString(),this._baseUrl="https://api.y-alvin.students.nomoreparties.site/",this._newsTopUrl="https://newsapi.org/v2/top-headlines?",this._newsSearchUrl="https://nomoreparties.co/news/v2/everything?language=en&pageSize=100&sortBy=publishedAt&from=".concat(this._searchFromDate,"&to=").concat(this._currentDate,"&apiKey=").concat("66c76d6a626b4e74a20ef60d3c03128a","&")}return Object(E.a)(e,[{key:"getNewsSearchedArticles",value:function(e){return fetch("".concat(this._newsSearchUrl,"q=").concat(e),{method:"GET"}).then((function(e){if(e.ok)return e.json()}))}},{key:"getSavedArticles",value:function(e,t){return fetch("".concat(this._baseUrl,"articles/").concat(e._id),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){if(e.ok)return e.json()}))}},{key:"saveArticle",value:function(e,t,n,a){return fetch("".concat(this._baseUrl,"articles/").concat(n._id),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({keyword:e.charAt(0).toUpperCase()+e.slice(1),title:t.title,text:t.description,link:t.url,image:t.urlToImage?t.urlToImage:"https://s3.amazonaws.com/speedsport-news/speedsport-news/wp-content/uploads/2018/07/01082232/image-not-found.png",source:t.source.name,date:new Date(t.publishedAt)})}).then((function(e){if(e.ok)return e.json()}))}},{key:"deleteArticle",value:function(e,t,n){return fetch("".concat(this._baseUrl,"articles/").concat(t._id,"/").concat(e._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){if(e.ok)return e.json()}))}}]),e}());var M=function(){var e=i.a.useState(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],o=i.a.useState(!1),s=Object(u.a)(o,2),r=s[0],_=s[1],p=i.a.useState(!1),j=Object(u.a)(p,2),h=j[0],g=j[1],f=i.a.useState(!1),O=Object(u.a)(f,2),x=O[0],S=O[1],k=i.a.useState({}),y=Object(u.a)(k,2),P=y[0],E=y[1],M=i.a.useState(!1),F=Object(u.a)(M,2),V=F[0],H=F[1],U=i.a.useState(!1),J=Object(u.a)(U,2),B=(J[0],J[1]),z=i.a.useState(""),q=Object(u.a)(z,2),G=q[0],R=q[1],Q=i.a.useState(!1),W=Object(u.a)(Q,2),Y=W[0],K=W[1],X=i.a.useState(!1),Z=Object(u.a)(X,2),$=Z[0],ee=Z[1],te=i.a.useState(!1),ne=Object(u.a)(te,2),ae=ne[0],ce=ne[1],ie=i.a.useState([]),oe=Object(u.a)(ie,2),se=oe[0],re=oe[1],le=i.a.useState([]),ue=Object(u.a)(le,2),de=ue[0],_e=ue[1],pe=i.a.useState({}),be=Object(u.a)(pe,2),me=be[0],je=be[1];function he(){c(!0)}function ge(){c(!n),_(!r)}function fe(){c(!1),_(!1),g(!1),S(!1)}function ve(e){"Escape"===e.key&&fe()}function Oe(e,t){(function(e,t){return fetch("".concat(L,"signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){if(e.ok)return e.json()})).then((function(e){if(e)return localStorage.setItem("token",e.token),e}))})(e,t).then((function(e){return e?(je(e.user),H(!0),void fe()):Promise.reject()})).catch((function(e){console.log("error logging in")}))}function xe(e,t,n){(function(e,t,n){return fetch("".concat(L,"signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n})}).then((function(e){if(e.ok)return e.json()}))})(e,t,n).then((function(e){return e?(je(e.user),_(!1),void g(!0)):Promise.reject()})).catch((function(e){console.log("failed to create user")}))}function Se(){localStorage.getItem("token")&&function(e){return fetch("".concat(L,"users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){if(e.ok)return e.json()}))}(localStorage.getItem("token")).then((function(e){e&&(H(!0),je(e))})).catch((function(e){console.log("failed to get user")}));localStorage.getItem("searchedArticles")&&(re(JSON.parse(localStorage.getItem("searchedArticles"))),R(localStorage.getItem("keyword")))}function we(){localStorage.removeItem("token"),H(!1)}function Ne(){B(!1)}function ke(e){if(localStorage.getItem("token")){var t=localStorage.getItem("token");D.saveArticle(G,e,me,t).then((function(e){_e([e].concat(Object(l.a)(de)))})).catch((function(e){console.log("err saving card")}))}}function ye(){if(localStorage.getItem("token")){var e=localStorage.getItem("token");D.deleteArticle(P,me,e).then((function(e){var t=de.filter((function(e){if(e._id!==P._id)return e}));_e(t),fe()})).catch((function(e){console.log("error deleting article")}))}}function Ce(){re([]),K(!0),ee(!1),ce(!1),D.getNewsSearchedArticles(G).then((function(e){e&&e.articles.length<=0&&ee(!0),re(e.articles),K(!1)})).catch((function(e){K(!1),ee(!1),ce(!0),console.log("error searching for articles")}))}return i.a.useEffect((function(){Se(),function(){if(localStorage.getItem("token")){var e=localStorage.getItem("token");D.getSavedArticles(me,e).then((function(e){e&&_e(e)})).catch((function(e){console.log("failed to get saved articles")}))}}(),window.addEventListener("keyup",ve)}),[]),i.a.useEffect((function(){var e;e=se,localStorage.setItem("searchedArticles",JSON.stringify(e)),localStorage.setItem("keyword",G)}),[se]),Object(a.jsx)(m.Provider,{value:me,children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)(d.d,{children:[Object(a.jsx)(b,{path:"/saved-news",openSigninPopup:he,component:v,isPopupOpened:n||r,closePopups:fe,onLogout:we,isLoggedIn:V,onHomeClick:Ne,data:de,isViewingSavedArticles:!0,onSaveArticle:function(e){ke(e)},onDeleteSavedArticle:function(e){!function(e){S(!0),E(e),console.log(P),console.log(me)}(e)}}),Object(a.jsx)(d.b,{exact:!0,path:"/",children:Object(a.jsx)(w,{onInputQueryChange:function(e){!function(e){R(e.target.value)}(e)},isSearching:Y,noArticlesFound:$,searchError:ae,onSearch:function(e){Ce()},isPopupOpened:n||r||h||x,closePopups:fe,onLogout:we,onSignInClick:he,isLoggedIn:V,onSavedArticlesClick:function(){B(!0)},data:se,savedArticles:de,onSaveArticle:function(e){V?ke(e):he()},onDeleteSavedArticle:function(e){ye()}})}),Object(a.jsx)(d.b,{path:"*",children:Object(a.jsx)(d.a,{to:"/"})})]}),Object(a.jsx)(N,{onHomeClick:Ne}),Object(a.jsx)(C,{onSubmit:function(e,t){Oe(e,t)},isOpened:n,closePopup:fe,flairTextClick:ge}),Object(a.jsx)(I,{onSubmit:function(e,t,n){xe(e,t,n)},isOpened:r,closePopup:fe,flairTextClick:ge}),Object(a.jsx)(A,{isOpened:h,closePopup:fe,flairTextClick:function(){fe(),he()}}),Object(a.jsx)(T,{isOpened:x,closePopup:fe,onSubmit:ye})]})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),i(e),o(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(r.a,{children:Object(a.jsx)(M,{})})}),document.getElementById("root")),F()}},[[36,1,2]]]);
//# sourceMappingURL=main.47b30a76.chunk.js.map